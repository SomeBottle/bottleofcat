# 关系数据库de关系代数小记

最近学数据库概论学到了**关系数据库**的关系代数了。哎嘛，真的把我整晕了，尤其是关系代数的使用，很容易让人被蒙在鼓里。  

![letmeunderstand-2021-10-06](https://raw.githubusercontent.com/cat-note/bottleassets/main/img/letmeunderstand-2021-10-06.webp)

**对我来说**槽点最大的莫过于书上的例子不多了，本来就挺抽象的一种**查询**语言，加上没有足够多让我懂的例子<del>(不过我本来也比较迟钝了)</del>，真的是难上加难...  
但没办法啊，这是我需要跨过的一道坎，于是我决定慢慢写出这篇小记（**主要针对数据库关系代数**）。不求挖的多深，但求能多少理解地透彻点😂  
目标是...希望这篇文章对大家有所帮助吧！废话不多说，开整！  o(￣ヘ￣o＃)

* **注意，因采用了动图(WebP)直观表达，流量用户请慎重浏览~**

## 0x01 小概念
* ### **行与列**

    ![rowandcolumn-2021-10-06](https://raw.githubusercontent.com/cat-note/bottleassets/main/img/rowandcolumn-2021-10-06.webp)

* ### **目** & **度** & **元数**  

    ![meshanddegree-2021-10-06](https://raw.githubusercontent.com/cat-note/bottleassets/main/img/meshanddegree-2021-10-06.webp)  

    1.如果使用关系表进行展示的话，**属性数（字段数）**其实就是**列数**，而进一步我们将属性数称为**元数**或者**目**或者**度**。  

    2.这样看来其实**元数就是目，目也就是度**。  

* ### **属性** & **字段**  

    1.**属性**就是**字段**（至少在数据库关系表这里是这样），都表示的是**列**。  

    2.上面和下面的图中第一行 **学号,姓名,性别...** 等等是 **属性名（字段名）**。  

* ### **元组** & **基数** & **分量**

    ![tupleandcardinalityandcomponent-2021-10-06](https://raw.githubusercontent.com/cat-note/bottleassets/main/img/tupleandcardinalityandcomponent-2021-10-06.webp)  

    1.表中的**一行**，是**一条记录**，也是**一个元组**。  
    
    2.记录（元组）的数称为**基数**，一定一定注意辨别这里的基数和下面**域的基数**。  
    
    3.**分量**是元组中一个**属性的值**。  

* ### **域**  

    ![domain-2021-10-06](https://raw.githubusercontent.com/cat-note/bottleassets/main/img/domain-2021-10-06.webp)  

    1.**域**就是属性的**取值范围所在**。  
    
    2.域是一个 **集合** ，域这个**集合**里的值都是**统一数据类型的**。  

    3.域也有一个**域的基数**，**域的基数**代表域能取的值的数量，比如： ```年龄属性的域={17,18,19,20,21,22,23,24,25}```，那么这个域的基数就是9  

    ![rememberfirst-2021-10-07](https://raw.githubusercontent.com/cat-note/bottleassets/main/img/rememberfirst-2021-10-07.png)

## 0x02 传统的集合运算  
传统的集合运算是从 **行** 的角度来进行的，也就是说操作对象集中在**元组**上~(๑•̀ㅂ•́)و✧  

* ### **前提**

    ![union1-2021-10-06](https://raw.githubusercontent.com/cat-note/bottleassets/main/img/union1-2021-10-06.webp)  

    1.运算要求两个关系**具有相同的目**(度,元数,属性数,列数)  
    2.运算要求两个关系**相应属性**取自**同一个域**，通俗来说，就是**两个关系对应的属性是相同的**  

* ### **并**  
    
    ![union2-2021-10-06](https://raw.githubusercontent.com/cat-note/bottleassets/main/img/union2-2021-10-06.webp)

    因为是集合运算，并运算过程中**一定要记得元组去重**  

    返回的结果是 **n目(属性数)** 关系，由**属于R**或者**属于S**的**元组**组成  

* ### **差**  

    ![except1-2021-10-06](https://raw.githubusercontent.com/cat-note/bottleassets/main/img/except1-2021-10-06.webp)  

    **R-S** 返回的结果是 **n目(属性数)** 关系，由**属于R**但**不属于S**的**元组**组成  

    一个例子可能有点模糊，接下来我们再来个 **S-R** 的例子：  

    ![except2-2021-10-07](https://raw.githubusercontent.com/cat-note/bottleassets/main/img/except2-2021-10-07.webp)  

* ### **交**  

    ![intersection-2021-10-07](https://raw.githubusercontent.com/cat-note/bottleassets/main/img/intersection-2021-10-07.webp)  

    **R∩S**返回的结果是 **n目(属性数)** 关系，由**属于R**且**属于S**的**元组**组成  

    很容易能发现：```R ∩ S = R - (R-S)```  

* ### **广义笛卡尔积**  

    ![bigiscoming-2021-10-07](https://raw.githubusercontent.com/cat-note/bottleassets/main/img/bigiscoming-2021-10-07.png)  

    咱实话实说，关系代数这一部分第一个让我晕头的地方就是这个笛卡尔积o(≧口≦)o，接下来我尽力搞懂并用动图展示出来笛卡尔积到底做了什么。  

    为什么这里是 **广义笛卡尔积** 呢？我们先看 **笛卡尔积** 算了什么：  

    > 笛卡尔乘积是指在数学中，两个集合X和Y的笛卡尔积（Cartesian product），又称直积，表示为X×Y，第一个对象是X的成员而第二个对象是Y的所有可能有序对的其中一个成员 
    >> 摘自某百科  

    这个概念看得我脑袋嗡嗡的，什么叫 **“第二个对象是Y的所有可能有序对的其中一个成员”** ？结合例子琢磨了一会儿，我结合离散数学教材关于笛卡尔积的定义梳理了一下：  

    > 笛卡尔乘积是指在数学中，两个集合X和Y的笛卡尔积，又称直积，表示为X×Y。X中的元素作为第一个元素，Y中的元素作为第二个元素，构成有序对。而笛卡尔积就是所有这样的有序对构成的一个集合。  

    接下来我们回到这里，**域** 其实就是一个 **集合**，结合上文，**笛卡尔积是在域上面的一种\<集合\>运算** ，下面放个简单的例子：   

    ![cartesian1-2021-10-08](https://raw.githubusercontent.com/cat-note/bottleassets/main/img/cartesian1-2021-10-08.webp)

    复习一下，一个 **域** 允许的 **不同取值的个数** 称为这个 **域的基数**。换种说法，也是一个 **集合** 中的 **元素个数**。  

    在上图的示例中，TEACHER域里有 ```张前程,赵向前``` 两位老师，这个域的基数也就是2；而MAJOR域里有 ```计算机专业,信息专业``` 两个专业，这个域的基数也是2。最后算出的域中有四个有序对，结果这个域的基数是4.  

    当 **域的基数为m和n** 的两个域进行笛卡尔积后我们得到的 **域** 的 **域的基数** 就是 **m×n** （这里×是乘号的意思哈，不要多想！ (￣△￣；)） 

    ![waitaminute-2021-10-08](https://raw.githubusercontent.com/cat-note/bottleassets/main/img/waitaminute-2021-10-08.png)  

    仔细看一下能发现上面的例子中有个 **有序对** 的概念，不用怕，在关系这里我们后面就用不着它了！看看接下来这个例子：  



    <!--最后算出的元组放进表格，讲一下域中笛卡尔计算的基数和元组-->


To be updated...

## 附表  

<details>
<summary>展开查看</summary>

* **0x01 小概念** 使用的表格：

    | 学号 | 姓名 | 性别 | 年龄 | 所在系 |
    |:--------:|:---:|:---:|:---:|:---:|
    | 20230102 | 新一 | 男  | 18 | CS  |
    | 20230103 | 高二 | 女  | 20 | CS  |
    | 20230104 | 张三 | 男  | 19 | MA  |
    | 20230105 | 李四 | 男  | 18 | IS  |
    | 20230106 | 王五 | 男  | 19 | CS  |
    | 20230107 | 赵六 | 女  | 21 | IS  |

* **0x02 传统的集合运算** 使用的表格  

    1. 前提,并,差  

        | 学号       | 姓名 | 性别 |   
        |:--------:|:---:|:---:|
        | 20230102 | 新一 | 男  |
        | 20230103 | 高二 | 女  |
        | 20230104 | 张三 | 男  |  

        | 学号       | 姓名 | 性别 |
        |:--------:|:---:|:---:|
        | 20230104 | 张三 | 男  |
        | 20230105 | 张三 | 女  |
        | 20230106 | 李四 | 男  |
        | 20230107 | 王五 | 男  |
        | 20230108 | 赵六 | 女  |

    2. 交  

        | 学号       | 姓名 | 性别 |
        |:--------:|:---:|:---:|
        | 20230102 | 新一 | 男  |
        | 20230103 | 高二 | 女  |
        | 20230104 | 张三 | 男  |

        | 学号       | 姓名 | 性别 |
        |:--------:|:---:|:---:|
        | 20230106 | 李四 | 男  |
        | 20230107 | 王五 | 男  |
        | 20230103 | 高二 | 女  |
        | 20230104 | 张三 | 男  |
        | 20230108 | 赵六 | 女  |

</details>


## 特别感谢
* [LemonPerfect](https://github.com/orgs/cat-note/people/LemonPrefect)  协助核对  
* [板砖猫](#) 协助核对  
* 动画番剧截图来自 [AnimeShot](https://as2.bitinn.net/)  

## References  
* 《数据库系统概论（第五版）》王珊主编 - 高等教育出版社  
* 《离散数学》屈婉玲,耿素云,张立昂 - 高等教育出版社
* [笛卡尔乘积 - 百度百科](https://baike.baidu.com/item/%E7%AC%9B%E5%8D%A1%E5%B0%94%E4%B9%98%E7%A7%AF)  
* [广义笛卡尔积 - 百度百科](https://baike.baidu.com/item/%E5%B9%BF%E4%B9%89%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF/23160124)  

